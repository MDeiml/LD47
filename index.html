<!-- index.html --><!DOCTYPE html>
<html>
    <head>
        <title>LD47</title>
         <!-- Disables mobile touch delay-->
        <meta name="viewport" content="width=device-width, user-scalable=no">
        <script type="module" src="./main.js"></script>
        <script id="shader-vs" type="x-shader/x-vertex">
            attribute vec3 position;
            attribute vec2 texCoord;

            varying mediump vec2 vTexCoord;
            varying mediump vec3 worldPos;

            uniform mat4 M;
            uniform mat4 VP;

            void main(void) {
                vTexCoord = texCoord;
                worldPos = (M * vec4(position, 1.0)).xyz;
                gl_Position = VP * vec4(worldPos, 1.0);
            }
        </script>
        <script id="shader-fs" type="x-shader/x-fragment">
            precision mediump float;

            varying mediump vec2 vTexCoord;
            varying mediump vec3 worldPos;

            uniform sampler2D texture;
            uniform sampler2D shadowTexture;
            uniform float fireIntensity;
            uniform int special;

            void main(void) {
                gl_FragColor = texture2D(texture, vTexCoord);
            }
        </script>
        <script id="shadow-vs" type="x-shader/x-vertex">
            attribute vec3 position;
            attribute vec2 texCoord;

            varying mediump vec2 vTexCoord;

            uniform mat4 M;
            uniform mat4 VP;

            void main(void) {
                vTexCoord = texCoord;
                vec3 pos = (M * vec4(position, 1.0)).xyz;
                float oldY = pos.y;
                pos.y += pos.z * pos.y / (2.5 - pos.z);
                pos.x = pos.x / oldY * pos.y;
                pos.z *= 0.1;
                gl_Position = VP * vec4(pos, 1.0);
            }
        </script>
        <script id="shadow-fs" type="x-shader/x-fragment">
            precision mediump float;
           
            varying mediump vec2 vTexCoord;

            uniform sampler2D texture;

            void main(void) {
                float alpha = texture2D(texture, vTexCoord).a;
                gl_FragColor = vec4(alpha, 0, 0, alpha);
            }
        </script>
        <style>
            * {
                margin: 0;
                padding: 0;
            }
            body, html { height: 100% }
            canvas {
                position: absolute;
                width: 100%;
                height: 100%;
            }
        </style>
        <link rel="shortcut icon" href="https://raw.githubusercontent.com/MDeiml/LD46/master/favicon.ico" type="image/x-icon">
        <link rel="icon" href="https://raw.githubusercontent.com/MDeiml/LD46/master/favicon.ico" type="image/x-icon">
    </head>

    <body>
        <canvas id="glCanvas" width="800" height="600"></canvas>
    </body>
</html>